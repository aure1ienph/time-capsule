<%= link_to capsule_path(capsule), class: 'link-underline link-underline-opacity-0' do %>
  <div class="container d-flex flex-column border-bottom px-4 py-4 border-light-gray bg-light-green">
    <div class="d-flex justify-content-between">
      <div class="h-100 d-flex flex-column align-content-end gap-2 w-100">
        <div class="d-flex w-100 justify-content-between gap-2 align-items-center">
          <div class="d-flex gap-2 w-100 align-items-center">
            <% if current_user.avatar.attached? %>
              <%= image_tag(capsule.user.avatar, class: "avatar") %>
            <% else %>
              <% colors = ["text-bg-primary", "text-bg-danger", "text-bg-warning", "text-bg-dark", "text-bg-info"] %>
              <div class="avatar-small <%= colors.sample %> d-flex align-items-center justify-content-center">
                <p class="text-light small mb-0"><%= current_user.first_name[0]%></p>
              </div>
            <% end %>
            <p class="fw-bold text-black fs-6 mb-0"><%= capsule.name %></p>
          </div>
          <div class="d-flex justify-content-end">
            <span class="material-symbols-outlined text-success">lock_open</span>
          </div>
        </div>
        <div class="d-flex w-100 justify-content-between align-items-end">
          <div>
            <p class="small text-success fw-bold mb-0">Open your capsule</p>
          </div>
          <div class="d-flex flex-column progress-cotainer">
            <div style="margin-left: <%= Capsule.find(capsule.id).progression %>%" ><i class="fa-solid fa-rocket" style="color: rgb(167, 104, 186);"></i> </div>
            <div class="progress" style="width: 100%; height: 10px;">
              <div class="bg-succses" role="progressbar" style="width: <%= capsule.progression %>%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        </div>
      </div>
      </div>
    </div>
<% end %>
