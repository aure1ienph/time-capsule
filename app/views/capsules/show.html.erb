<div class="d-flex flex-column m-4 w-100 justify-content-start">
  <h1 class="text-black text-start fs-2"><%= @capsule.name %></h1>
  <p class="text-secondary fs-6">Send by <%= @capsule.user.first_name %> on <%= @capsule.encapsulation_date.strftime("%d/%m/%Y") %></p>
  <div class="d-flex">
    <% @users.each do |user| %>
      <% if user.avatar.attached? %>
        <%= image_tag(user.avatar, class: "avatar") %>
      <% else %>
        <% colors = ["text-bg-primary", "text-bg-danger", "text-bg-warning", "text-bg-dark", "text-bg-info"] %>
        <div class="avatar <%= colors.sample%> d-flex align-items-center justify-content-center">
          <span class="text-light"><%= current_user.first_name[0]%></span>
        </div>
      <% end %>
    <% end %>
  </div>
  <h2 class="text-black fs-5 text-start">Messages</h2>
  <div class="mt-2 mb-4 p-0">
    <% @capsule.messages.each do |message| %>
      <div>
        <p class="fw-bold text-black mb-1"><%= message.title %></p>
        <p><%= message.content %></p>
      </div>
    <% end %>
  </div>
  <h2 class="text-black fs-5 text-start">Audio messages</h2>
  <div class="mt-2 mb-4 p-0">
    <% @capsule.audios.each do |audio| %>
      <audio controls>
        <source src="<%= rails_blob_url(audio) %>" type="audio/mpeg" class="mb-1"/>
      </audio>
    <% end %>
  </div>
  <h2 class="text-black fs-5 text-start">Photos</h2>
  <div class="d-flex border-light-gray mt-2 mb-4 p-0">
    <% @capsule.photos.each do |photos| %>
      <%= image_tag photos %>
    <% end %>
  </div>
  <h2 class="text-black fs-5 text-start">Video record</h2>
  <div class="mt-2 mb-4 p-0">
    <% @capsule.videos.each do |videos| %>
      <video controls>
        <source src="<%= rails_blob_url(video) %>" type="<%= attachment.content_type %>"/>
      </video>
    <% end %>
  </div>
</div>
